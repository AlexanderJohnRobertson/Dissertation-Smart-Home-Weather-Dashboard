<!-- Humidity page of Smart Home Weather Dashboard. Author: S275931 -->
<!-- Original HTML based on codepen.io responsive dashboard template and modified by S275931 to suit the application. https://codepen.io/ecemgo/pen/rNbLodN -->
<!-- Original HTML based on codepen.io responsive bar chart template and modified by S275931 to suit the application. https://codepen.io/abelfry/pen/gNmeeg -->
<!-- Original HTML based on canvasJS responsive line graph template and modified by S275931 to suit the application. https://canvasjs.com/html5-javascript-line-chart/ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="60; url=/humidity">
    <title>Humidity Details</title>
    <link rel="stylesheet" href="/static/humidity.css">
    <link rel="stylesheet" href="/static/toggleswitch.css">
    <link rel="stylesheet" href="/static/barChart.css">
    <script src="/static/dashboard.js"></script>




</head>

<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<body class="darkmode">
{% extends 'base.html' %} <!-- Extend from base4.html which is the HTML file for the responsive navbar once logged in -->

{% block content %} <!-- Content block for the form -->

    <section class="content">
      <div class="left-content">

        <div class="title">
            <div class="btn-group2">
<button class="button2" onclick="window.location.href='/';">â—„ Back</button>
            <h1 align="center">Humidity</h1>
            </div>

         <div class="dashboard-container">
            <div class="card dashboard-card">
              <div class="dashboard-content">
                <h2>Outdoor Humidity</h2>
                <h3>{{ data[0] }} <img src="/static/images/humidity.svg" alt="Humidity" style="width:70px;height:150px;" align="right"></h3>

              </div>

            </div>

            <div class="card dashboard-card">
              <div class="dashboard-content">
                <h2>Indoor Humidity</h2>
                <h3>{{ data[1] }} <img src="/static/images/humidity.svg" alt="Humidity" style="width:70px;height:150px;" align="right"></h3>

              </div>

            </div>




      </div>
<h1 style="font-size: 50px; text-align: center">Hourly Humidity Graph (Last 24 Hours)</h1>
<script src="https://www.amcharts.com/lib/4/core.js"></script>
    <script src="https://www.amcharts.com/lib/4/charts.js"></script>
            <script>var chart2 = am4core.create("chartdiv", am4charts.XYChart);

chart2.data = [{
  "hour": {{ data[4] }},
  "humidity": {{ data[5] }}
}, {
  "hour": {{ data[6] }},
  "humidity": {{ data[7] }}
}, {
  "hour": {{ data[8] }},
  "humidity": {{ data[9] }}
}, {
  "hour": {{ data[10] }},
  "humidity": {{ data[11] }}
}, {
  "hour": {{ data[12] }},
  "humidity": {{ data[13] }}
}, {
  "hour": {{ data[14] }},
  "humidity": {{ data[15] }}
}, {
  "hour": {{ data[16] }},
  "humidity": {{ data[17] }}
}, {
  "hour": {{ data[18] }},
  "humidity": {{ data[19] }}
}, {
  "hour": {{ data[20] }},
  "humidity": {{ data[21] }}
}, {
  "hour": {{ data[22] }},
  "humidity": {{ data[23] }}
}, {
  "hour": {{ data[24] }},
  "humidity": {{ data[25] }}
}, {
  "hour": {{ data[26] }},
  "humidity": {{ data[27] }}
}, {
  "hour": {{ data[28] }},
  "humidity": {{ data[29] }}
}, {
  "hour": {{ data[30] }},
  "humidity": {{ data[31] }}
}, {
  "hour": {{ data[32] }},
  "humidity": {{ data[33] }}
}, {
  "hour": {{ data[34] }},
  "humidity": {{ data[35] }}
}, {
  "hour": {{ data[36] }},
  "humidity": {{ data[37] }}
}, {
  "hour": {{ data[38] }},
  "humidity": {{ data[39] }}
}, {
  "hour": {{ data[40] }},
  "humidity": {{ data[41] }}
}, {
  "hour": {{ data[42] }},
  "humidity": {{ data[43] }}
}, {
  "hour": {{ data[44] }},
  "humidity": {{ data[45] }}
}, {
  "hour": {{ data[46] }},
  "humidity": {{ data[47] }}
}, {
  "hour": {{ data[48] }},
  "humidity": {{ data[49] }}
}, {
  "hour": {{ data[50] }},
  "humidity": {{ data[51] }}
}];

chart2.padding(40, 40, 40, 40);

let categoryAxis = chart2.xAxes.push(new am4charts.CategoryAxis());
categoryAxis.renderer.grid.template.location = 0;
categoryAxis.dataFields.category = "hour";
categoryAxis.renderer.minGridDistance = 60;

let valueAxis = chart2.yAxes.push(new am4charts.ValueAxis());

let series = chart2.series.push(new am4charts.ColumnSeries());
series.dataFields.categoryX = "hour";
series.dataFields.valueY = "humidity";
series.tooltipText = "{name}: {valueY}";
series.name = "Humidity %";
series.columns.template.focusable = true;
series.columns.template.hoverOnFocus = true;
series.columns.template.tooltipText = "xx {valueY}";
series.properties.fill = am4core.color("#29c996");


chart2.scrollbarX = new am4core.Scrollbar();

chart2.legend = new am4charts.Legend();


chart2.cursor = new am4charts.XYCursor();



/**
 * ========================================================
 * Enabling responsive features
 * ========================================================
 */

chart2.responsive.enabled = true;
chart2.responsive.useDefault = false

chart2.responsive.rules.push({
  relevant: function(target) {
    if (target.pixelWidth <= 400) {
      return true;
    }

    return false;
  },
  state: function(target, stateId) {

    if (target instanceof am4charts.Chart) {
      console.log("xy chart state")
      var state = target.states.create(stateId);
      state.properties.paddingTop = 0;
      state.properties.paddingRight = 15;
      state.properties.paddingBottom = 5;
      state.properties.paddingLeft = 15;
      return state;
    }

    if (target instanceof am4core.Scrollbar) {
      console.log("xy scrollbar state")
      var state = target.states.create(stateId);
      state.properties.marginBottom = -10;
      return state;
    }

    if (target instanceof am4charts.Legend) {
      console.log("xy legend state")
      var state = target.states.create(stateId);
      state.properties.paddingTop = 0;
      state.properties.paddingRight = 0;
      state.properties.paddingBottom = 0;
      state.properties.paddingLeft = 0;
      state.properties.marginLeft = 0;
      target.setStateOnChildren = true;
      target.itemContainers.template.setStateOnChildren = true;
      target.itemContainers.template.applyOnClones = true;
      target.markers.template.applyOnClones = true;
      var markerState = target.markers.template.states.create(stateId);
      markerState.properties.width = 15;
      markerState.properties.height = 10;
      return state;
    }

    if (target instanceof am4charts.AxisRendererY) {
      console.log("xy yaxis state")
      var state = target.states.create(stateId);
      state.properties.inside = true;
      state.properties.maxLabelPosition = 0.99;
      return state;
    }

    if ((target instanceof am4charts.AxisLabel) && (target.parent instanceof am4charts.AxisRendererY)) {
      console.log("xy axis label state")
      var state = target.states.create(stateId);
      state.properties.dy = -15;
      state.properties.paddingTop = 3;
      state.properties.paddingRight = 5;
      state.properties.paddingBottom = 3;
      state.properties.paddingLeft = 5;

      // Create a separate state for background
      target.setStateOnChildren = true;
      var bgstate = target.background.states.create(stateId);
      bgstate.properties.fill = am4core.color("#fff");
      bgstate.properties.fillOpacity = 0.7;

      return state;
    }

    // if ((target instanceof am4core.Rectangle) && (target.parent instanceof am4charts.AxisLabel) && (target.parent.parent instanceof am4charts.AxisRendererY)) {
    //   var state = target.states.create(stateId);
    //   state.properties.fill = am4core.color("#f00");
    //   state.properties.fillOpacity = 0.5;
    //   return state;
    // }

    return null;
  }
});

chart2.responsive.rules.push({
  relevant: function (target) {
    if (target.pixelWidth > target.pixelHeight) {
      return true;
    }
    return false;
  },
  state: function (target, stateId) {
    if (target instanceof am4charts.Legend) {
      console.log("xy move legend state")
      var state = target.states.create(stateId);
      state.properties.position = "right";
      return state;
      //target.position = "right";
    }

  }
});</script>
<div id="chartdiv"></div>
        <div id="dailyHumidityGraph" style="width: 100%; height: 370px;"></div>
<script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
            <script>window.onload = function () {

var chart = new CanvasJS.Chart("dailyHumidityGraph", {
	animationEnabled: true,
	theme: "dark2",
	title:{
		text: "Daily Humidity Graph % (Last 30 Days)"
	},
	data: [{
		type: "line", lineColor: "#21d39a", lineThickness: 5,
      	indexLabelFontSize: 16,
		dataPoints: [
			{ y: {{data[52]}} },
			{ y: {{data[53]}} },
			{ y: {{data[54]}} },
            { y: {{data[55]}} },
            { y: {{data[56]}} },
            { y: {{data[57]}} },
            { y: {{data[58]}} },
            { y: {{data[59]}} },
            { y: {{data[60]}} },
            { y: {{data[61]}} },
            { y: {{data[62]}} },
            { y: {{data[63]}} },
            { y: {{data[64]}} },
            { y: {{data[65]}} },
            { y: {{data[66]}} },
            { y: {{data[67]}} },
            { y: {{data[68]}} },
            { y: {{data[69]}} },
            { y: {{data[70]}} },
            { y: {{data[71]}} },
            { y: {{data[72]}} },
            { y: {{data[73]}} },
            { y: {{data[74]}} },
            { y: {{data[75]}} },
            { y: {{data[76]}} },
            { y: {{data[77]}} },
            { y: {{data[78]}} },
            { y: {{data[79]}} },
            { y: {{data[80]}} },
            { y: {{data[81]}} }
		]
	}]
});
chart.render();

var chart = new CanvasJS.Chart("monthlyHumidityGraph", {
	animationEnabled: true,
	theme: "dark2",
	title:{
		text: "Monthly Humidity Graph % (Last 12 Months)"
	},
	data: [{
		type: "line", lineColor: "#0057fd", lineThickness: 5,
      	indexLabelFontSize: 16,
		dataPoints: [
			{label: "Jan", y: {{data[82]}} },
			{label: "Feb", y: {{data[83]}} },
			{label: "Mar", y: {{data[84]}} },
			{label: "Apr", y: "N/A" },
			{label: "May", y: {{data[85]}} },
			{label: "Jun", y: {{data[86]}} },
			{label: "Jul", y: {{data[87]}} },
			{label: "Aug", y: {{data[88]}} },
			{label: "Sep", y: {{data[89]}} },
			{label: "Oct", y: {{data[90]}} },
			{label: "Nov", y: {{data[91]}} },
			{label: "Dec", y: {{data[92]}} }
		]
	}]
});
chart.render();

}</script>

            <div id="monthlyHumidityGraph" style="width: 100%; height: 370px;"></div>
<script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>


        </div>
          <br><br><br><br><br><br><br><br>
        </div>
    </section>
{% endblock %} <!-- End of content block -->
  </body>

</html>