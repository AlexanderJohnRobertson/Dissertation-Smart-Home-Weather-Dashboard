<!-- Temperature page of Smart Home Weather Dashboard. Author: S275931 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="60; url=/temperature">
    <title>Temperature Details</title>
    <link rel="stylesheet" href="/static/temperature.css">
    <link rel="stylesheet" href="/static/toggleswitch4.css">
    <link rel="stylesheet" href="/static/barChart.css">




</head>

<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<body class="darkmode">
{% extends 'base.html' %} <!-- Extend from base4.html which is the HTML file for the responsive navbar once logged in -->

{% block content %} <!-- Content block for the form -->

    <section class="content">
      <div class="left-content">

        <div class="title">
            <div class="btn-group2">
<button class="button2" onclick="window.location.href='/';">◄ Back</button>
            <h1 align="center">Temperature</h1>
            </div>
          <div class="dashboard-container">
            <div class="card dashboard-card">
              <div class="dashboard-content">
                <h2>Outdoor Temperature</h2>
                <h3 class="text" style=" color: #e28d2c">{{ data[0] }} </h3>
                  <img src="/static/images/temperature.png" alt="Temperature" style="width:70px;height:150px;position: relative; top: -10px;" align="right">
                  <div class="togglecontainer">
          <div class="toggle" style="position: relative; top: -30px; left:-40px; background: #ffffff">
            <div class="toggle-button" onclick="animatedToggle()"></div>
          </div>
          <div class="unit" style="color: #e08c2c;position: relative; top: -30px; left:-40px; font-size: 40px">°C</div>
        </div>

        <script>let toggle = document.querySelector(".toggle");
let text = document.querySelector(".text");
let unit = document.querySelector(".unit");

function animatedToggle() {
  toggle.classList.toggle("active");
  if (toggle.classList.contains("active")) {
        text.innerHTML = "{{ data[2] }}";
    unit.innerHTML = "°F";
  } else {
      text.innerHTML = "{{ data[0] }}";
        unit.innerHTML = "°C";
  }
}</script>
              </div>

            </div>

            <div class="card dashboard-card">
              <div class="dashboard-content">
                <h2>Indoor Temperature</h2>
                <h3 class="text3" style=" color: #e28d2c">{{ data[1] }} </h3>
                  <img src="/static/images/temperature.png" alt="Temperature" style="width:70px;height:150px;position: relative; top: -10px;" align="right">
                  <div class="togglecontainer3">
          <div class="toggle3" style="position: relative; top: -30px; left:-40px; background: #ffffff">
            <div class="toggle-button3" onclick="animatedToggle3()"></div>
          </div>
          <div class="unit3" style="color: #e08c2c;position: relative; top: -30px; left:-40px; font-size: 40px">°C</div>
        </div>

        <script>let toggle3 = document.querySelector(".toggle3");
let text3 = document.querySelector(".text3");
let unit3 = document.querySelector(".unit3");

function animatedToggle3() {
  toggle3.classList.toggle("active");
  if (toggle3.classList.contains("active")) {
        text3.innerHTML = "{{ data[3] }}";
    unit3.innerHTML = "°F";
  } else {
      text3.innerHTML = "{{ data[1] }}";
        unit3.innerHTML = "°C";
  }
}</script>
              </div>

            </div>




      </div>
<h1 style="font-size: 50px; text-align: center">Hourly Temperature Graph (Last 24 Hours)</h1>
<script src="https://www.amcharts.com/lib/4/core.js"></script>
    <script src="https://www.amcharts.com/lib/4/charts.js"></script>
            <script>var chart2 = am4core.create("chartdiv", am4charts.XYChart);

chart2.data = [{
  "hour": {{ data[5] }},
  "temperature": {{ data[6] }}
}, {
  "hour": {{ data[7] }},
  "temperature": {{ data[8] }}
},
 {
  "hour": {{ data[9] }},
  "temperature": {{ data[10] }}
},
{
  "hour": {{ data[11] }},
  "temperature": {{ data[12] }}
},
{
  "hour": {{ data[13] }},
  "temperature": {{ data[14] }}
},
{
  "hour": {{ data[15] }},
  "temperature": {{ data[16] }}
},
{
  "hour": {{ data[17] }},
  "temperature": {{ data[18] }}
},
{
  "hour": {{ data[19] }},
  "temperature": {{ data[20] }}
},
{
  "hour": {{ data[21] }},
  "temperature": {{ data[22] }}
},
{
  "hour": {{ data[23] }},
  "temperature": {{ data[24] }}
},
{
  "hour": {{ data[25] }},
  "temperature": {{ data[26] }}
},
{
  "hour": {{ data[27] }},
  "temperature": {{ data[28] }}
},
{
  "hour": {{ data[29] }},
  "temperature": {{ data[30] }}
},
{
  "hour": {{ data[31] }},
  "temperature": {{ data[32] }}
},
{
  "hour": {{ data[33] }},
  "temperature": {{ data[34] }}
},
{
  "hour": {{ data[35] }},
  "temperature": {{ data[36] }}
},
{
  "hour": {{ data[37] }},
  "temperature": {{ data[38] }}
},
{
  "hour": {{ data[39] }},
  "temperature": {{ data[40] }}
},
{
  "hour": {{ data[41] }},
  "temperature": {{ data[42] }}
},
{
  "hour": {{ data[43] }},
  "temperature": {{ data[44] }}
},
{
  "hour": {{ data[45] }},
  "temperature": {{ data[46] }}
},
{
  "hour": {{ data[47] }},
  "temperature": {{ data[48] }}
},
{
  "hour": {{ data[49] }},
  "temperature": {{ data[50] }}
},
{
  "hour": {{ data[51] }},
  "temperature": {{ data[52] }}
}];

chart2.padding(40, 40, 40, 40);

let categoryAxis = chart2.xAxes.push(new am4charts.CategoryAxis());
categoryAxis.renderer.grid.template.location = 0;
categoryAxis.dataFields.category = "hour";
categoryAxis.renderer.minGridDistance = 60;

let valueAxis = chart2.yAxes.push(new am4charts.ValueAxis());

let series = chart2.series.push(new am4charts.ColumnSeries());
series.dataFields.categoryX = "hour";
series.dataFields.valueY = "temperature";
series.tooltipText = "{name}: {valueY}";
series.name = "Temperature (ºC)";
series.columns.template.focusable = true;
series.columns.template.hoverOnFocus = true;
series.columns.template.tooltipText = "xx {valueY}";
series.properties.fill = am4core.color("#29c996");


chart2.scrollbarX = new am4core.Scrollbar();

chart2.legend = new am4charts.Legend();


chart2.cursor = new am4charts.XYCursor();



/**
 * ========================================================
 * Enabling responsive features
 * ========================================================
 */

chart2.responsive.enabled = true;
chart2.responsive.useDefault = false

chart2.responsive.rules.push({
  relevant: function(target) {
    if (target.pixelWidth <= 400) {
      return true;
    }

    return false;
  },
  state: function(target, stateId) {

    if (target instanceof am4charts.Chart) {
      console.log("xy chart state")
      var state = target.states.create(stateId);
      state.properties.paddingTop = 0;
      state.properties.paddingRight = 15;
      state.properties.paddingBottom = 5;
      state.properties.paddingLeft = 15;
      return state;
    }

    if (target instanceof am4core.Scrollbar) {
      console.log("xy scrollbar state")
      var state = target.states.create(stateId);
      state.properties.marginBottom = -10;
      return state;
    }

    if (target instanceof am4charts.Legend) {
      console.log("xy legend state")
      var state = target.states.create(stateId);
      state.properties.paddingTop = 0;
      state.properties.paddingRight = 0;
      state.properties.paddingBottom = 0;
      state.properties.paddingLeft = 0;
      state.properties.marginLeft = 0;
      target.setStateOnChildren = true;
      target.itemContainers.template.setStateOnChildren = true;
      target.itemContainers.template.applyOnClones = true;
      target.markers.template.applyOnClones = true;
      var markerState = target.markers.template.states.create(stateId);
      markerState.properties.width = 15;
      markerState.properties.height = 10;
      return state;
    }

    if (target instanceof am4charts.AxisRendererY) {
      console.log("xy yaxis state")
      var state = target.states.create(stateId);
      state.properties.inside = true;
      state.properties.maxLabelPosition = 0.99;
      return state;
    }

    if ((target instanceof am4charts.AxisLabel) && (target.parent instanceof am4charts.AxisRendererY)) {
      console.log("xy axis label state")
      var state = target.states.create(stateId);
      state.properties.dy = -15;
      state.properties.paddingTop = 3;
      state.properties.paddingRight = 5;
      state.properties.paddingBottom = 3;
      state.properties.paddingLeft = 5;

      // Create a separate state for background
      target.setStateOnChildren = true;
      var bgstate = target.background.states.create(stateId);
      bgstate.properties.fill = am4core.color("#fff");
      bgstate.properties.fillOpacity = 0.7;

      return state;
    }

    // if ((target instanceof am4core.Rectangle) && (target.parent instanceof am4charts.AxisLabel) && (target.parent.parent instanceof am4charts.AxisRendererY)) {
    //   var state = target.states.create(stateId);
    //   state.properties.fill = am4core.color("#f00");
    //   state.properties.fillOpacity = 0.5;
    //   return state;
    // }

    return null;
  }
});

chart2.responsive.rules.push({
  relevant: function (target) {
    if (target.pixelWidth > target.pixelHeight) {
      return true;
    }
    return false;
  },
  state: function (target, stateId) {
    if (target instanceof am4charts.Legend) {
      console.log("xy move legend state")
      var state = target.states.create(stateId);
      state.properties.position = "right";
      return state;
      //target.position = "right";
    }

  }
});</script>
<div id="chartdiv"></div>
        <div id="dailyTemperatureGraph" style="width: 100%; height: 370px;"></div>
<script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
            <script>window.onload = function () {

var chart = new CanvasJS.Chart("dailyTemperatureGraph", {
	animationEnabled: true,
	theme: "dark2",
	title:{
		text: "Daily Temperature Graph °C (Last 30 Days)"
	},
	data: [{
		type: "line", lineColor: "#21d39a", lineThickness: 5,
      	indexLabelFontSize: 16,
		dataPoints: [
			{ y: {{ data[53] }} },
			{ y: {{ data[54] }} },
			{ y: {{ data[55] }} },
			{ y: {{ data[56] }} },
			{ y: {{ data[57] }} },
			{ y: {{ data[58] }} },
			{ y: {{ data[59] }} },
			{ y: {{ data[60] }} },
			{ y: {{ data[61] }} },
            { y: {{ data[62] }} },
            { y: {{ data[63] }} },
            { y: {{ data[64] }} },
            { y: {{ data[65] }} },
            { y: {{ data[66] }} },
            { y: {{ data[67] }} },
            { y: {{ data[68] }} },
            { y: {{ data[69] }} },
            { y: {{ data[70] }} },
            { y: {{ data[71] }} },
            { y: {{ data[72] }} },
            { y: {{ data[73] }} },
            { y: {{ data[74] }} },
            { y: {{ data[75] }} },
            { y: {{ data[76] }} },
            { y: {{ data[77] }} },
            { y: {{ data[78] }} },
            { y: {{ data[79] }} },
            { y: {{ data[80] }} },
            { y: {{ data[81] }} },
            { y: {{ data[82] }} }

		]
	}]
});
chart.render();

var chart = new CanvasJS.Chart("monthlyTemperatureGraph", {
	animationEnabled: true,
	theme: "dark2",
	title:{
		text: "Monthly Temperature Graph °C (Last 12 Months)"
	},
	data: [{
		type: "line", lineColor: "#0057fd", lineThickness: 5,
      	indexLabelFontSize: 16,
		dataPoints: [
			{label: "Jan", y: {{ data[83] }} },
			{label: "Feb", y: {{ data[84] }} },
			{label: "Mar", y: {{ data[85] }} },
			{label: "Apr", y: "N/A" },
			{label: "May", y: {{ data[86] }} },
			{label: "Jun", y: {{ data[87] }} },
			{label: "Jul", y: {{ data[88] }} },
            {label: "Aug", y: {{ data[89] }} },
            {label: "Sep", y: {{ data[90] }} },
            {label: "Oct", y: {{ data[91] }} },
            {label: "Nov", y: {{ data[92] }} },
            {label: "Dec", y: {{ data[93] }} }
		]
	}]
});
chart.render();

}</script>

            <div id="monthlyTemperatureGraph" style="width: 100%; height: 370px;"></div>
<script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>


        </div>
          <br><br><br><br><br><br><br><br>
        </div>
    </section>
{% endblock %} <!-- End of content block -->
  </body>

</html>